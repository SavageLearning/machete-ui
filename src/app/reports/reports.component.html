<p-card styleClass="p-card-shadow p-mb-5" header="Reports">
  <div class="p-fluid p-formgrid p-grid"> 
    <div class="p-field p-col-12">
      <label for="select-report">Select a report</label>
      <p-dropdown inputId="select-report" [options]="reportsDropDown" (onChange)="getView()" [(ngModel)]="selectedReportID" [filter]="true" styleClass="p-mr-2"></p-dropdown>
    </div>
    <div *ngIf="inputs.memberNumber === true" class="p-field p-col-12 p-md-12 p-lg-4">
      <label for="memberNumber">Member number</label>
      <input id="memberNumber" type="text" pInputText [(ngModel)]="o.memberNumber" (onBlur)="getView()" dataType="number"/>
    </div>
    <div *ngIf="inputs.beginDate === true" class="p-field p-col-12 p-md-12 p-lg-4">
      <label for="start-date-cal">Start date</label>
      <p-calendar id="start-date-cal" placeholder="Start date" (onSelect)="getView()" (onBlur)="getView()" [(ngModel)]="o.beginDate" [showIcon]="true" dataType="string"></p-calendar>
    </div>
    <div *ngIf="inputs.endDate === true" class="p-field p-col-12 p-md-12 p-lg-4">
      <label for="end-date-cal">End date</label>
      <p-calendar id="end-date-cal" placeholder="End date" (onSelect)="getView()" (onBlur)="getView()" [(ngModel)]="o.endDate" [showIcon]="true" dataType="string"></p-calendar>
    </div>
  </div>
  <ng-template pTemplate="footer">
    <!-- Responsive container` -->
    <div class="p-d-flex p-flex-column p-flex-md-row">
      <div class="p-mb-2 p-mr-2">
        <button pButton pRipple type="button" icon="pi pi-refresh" tooltipPosition="bottom" label="Refresh" (click)="getView()"></button>
      </div>
      <div class="p-mb-2 p-mr-2">
        <button pButton pRipple type="button" icon="pi pi-pencil" tooltipPosition="bottom" label="Edit" (click)="displayDialog=true"></button>
      </div>
    </div>
  </ng-template>
</p-card>

<p-dialog header="{{title}}" [(visible)]="displayDescription">
  {{description}}
</p-dialog>
<div>

<p-table
  #dt
  [value]="viewData"
  sortField="value"
  sortOrder="-1"
  sortMode="single"
  [responsive]="true"
  styleClass="p-datatable-gridlines p-datatable-striped"
  [columns]="cols"
  >
  <ng-template pTemplate="caption">
    <!-- Responsive container` -->
    <div class="p-d-flex p-flex-column p-flex-md-row p-jc-between">
      <div class="p-mb-2 p-mr-2">
        <button type="button" pButton icon="ui-icon-file-download" iconPos="left" label="CSV" (click)="getExport(dt)"></button>
      </div>
      <div class="p-mb-2 p-mr-2">
        <input class="p-ml-auto" type="text" placeholder="Global search" width="200">
      </div>
      <div class="p-mb-2 p-mr-2">
        <button class="p-ml-auto" pButton type="button" icon="ui-icon-help-outline" (click)="showDescription()" iconPos="left"></button>
      </div>
    </div>

  </ng-template>
  <ng-template pTemplate="header">
    <tr>
        <th *ngFor="let col of cols">
            {{col.header}}
        </th>
    </tr>
</ng-template>

<ng-template pTemplate="body" let-viewData>
  <tr>
      <td *ngFor="let col of cols">
              {{viewData[col.field]}}
      </td>
  </tr>
</ng-template>
</p-table>
  <p-dialog
    header="Report Details"
    [(visible)]="displayDialog"
    [responsive]="true"
    showEffect="fade"
    [modal]="false"
    resizable="true"
    width="1000"
  >
    <div>
      <div class="ui-g" style="display:flex">
        <div class="ui-sm-4 ui-md-3 ui-lg-3" style="flex: 0"><label for="name">Name</label></div>
        <div class="ui-sm-8 ui-md-9 ui-lg-9" style="flex: 1"><input pInputText id="name" [(ngModel)]="name" style="width: 100%;"/></div>
      </div>
      <div class="ui-g" style="display:flex">
        <div class="ui-sm-4 ui-md-3 ui-lg-3" style="flex: 0"><label for="commonName">Common name</label></div>
        <div class="ui-sm-8 ui-md-9 ui-lg-9" style="flex: 1"><input pInputText id="commonName" style="width: 100%;" [(ngModel)]="selectedReport.commonName" /></div>
      </div>
      <!--<div class="ui-g">-->
        <!--<div class="ui-sm-4 ui-md-3 ui-lg-2"><label for="title">Title</label></div>-->
        <!--<div class="ui-sm-8 ui-md-9 ui-lg-10"><input pInputText id="title" [(ngModel)]="selectedReport.title" /></div>-->
      <!--</div>-->
      <div class="ui-g">
        <div class="ui-sm-4 ui-md-3 ui-lg-3" style="flex: 0"><label for="description">Description</label></div>
        <div class="ui-sm-8 ui-md-9 ui-lg-9" style="flex: 1"><input pInputText id="description" style="width: 100%;" [(ngModel)]="selectedReport.description" /></div>
      </div>
      <div class="ui-g" style="display:flex">
        <div class="ui-sm-4 ui-md-3 ui-lg-3" style="flex: 0"><label for="sqlquery">SQL Query</label></div>
        <div class="ui-sm-8 ui-md-9 ui-lg-9" style="flex: 1">
              <textarea pInputTextarea id="sqlquery" rows="20" style="width: 100%;" [(ngModel)]="selectedReport.sqlquery" autoResize="true"></textarea>
        </div>
      </div>
    </div>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
        <!--<button type="button" pButton icon="fa-close" (click)="delete()" label="Delete"></button>-->
        <!--<button type="button" pButton icon="fa-check" (click)="save()" label="Save"></button>-->
      </div>
    </p-footer>
  </p-dialog>
</div>
